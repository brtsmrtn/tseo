<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>The Soul Expanding Ocean</title>
    <meta name="description" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      rel="stylesheet"
      type="text/css"
      href="./intro_with_mic.css"
      media="screen"
    />
    <style>
      @font-face {
        font-family: "Amare Alta";
        font-style: normal;
        font-weight: 800;
        src: url("./fonts/Amare-Alta.otf") format("opentype");
        src: url("./fonts/Amare-Alta.eot") format("embedded-opentype"),
          url("./fonts/Amare-Alta.eot?#iefix") format("embedded-opentype"),
          url("./fonts/Amare-Alta.woff2") format("woff2"),
          url("./fonts/Amare-Alta.woff") format("woff"),
          url("./fonts/Amare-Alta.ttf") format("truetype"),
          url("./fonts/Amare-Alta.svg") format("svg");
      }
      @font-face {
        font-family: "Amare Medium";
        font-style: normal;
        font-weight: 400;
        src: url("./fonts/Amare-Medium.otf") format("opentype");
        src: url("./fonts/Amare-Medium.eot") format("embedded-opentype"),
          url("./fonts/Amare-Medium.eot?#iefix") format("eot"),
          url("./fonts/Amare-Medium.woff2") format("woff2"),
          url("./fonts/Amare-Medium.woff") format("woff"),
          url("./fonts/Amare-Medium.ttf") format("truetype"),
          url("./fonts/Amare-Medium.svg") format("svg");
      }
      @font-face {
        font-family: "Amare Linnea";
        font-style: normal;
        font-weight: 100;
        src: url("./fonts/Amare-Linnea.otf") format("opentype");
        src: url("./fonts/Amare-Linnea.eot") format("embedded-opentype"),
          url("./fonts/Amare-Linnea.eot?#iefix") format("embedded-opentype"),
          url("./fonts/Amare-Linnea.woff2") format("woff2"),
          url("./fonts/Amare-Linnea.woff") format("woff"),
          url("./fonts/Amare-Linnea.ttf") format("truetype"),
          url("./fonts/Amare-Linnea.svg") format("svg");
      }
    </style>
  </head>
  <body>
    <main>
      <div id="intro">
        <div id="intro-message" class="message">
          <span
            >We can introduce the exhibition/this experience, eventually add
            hyperlinks/logos/... here.</span
          >
        </div>
        <div id="intro-feedback" class="feedback start">
          <button onclick="passIntro()">
            I LIKE THAT AND WANT TO KNOW MORE
          </button>
        </div>
      </div>
      <div id="participation" class="hidden">
        <div id="participation-message" class="message">
          <span
            >If the recording technology works on this device, we can offer the
            user whether he wants to participate (chant) or go straight to the
            content.</span
          >
        </div>
        <div id="participation-feedback" class="feedback">
          <button onclick="passParticipation()">
            YES I WANT TO PARTICIPATE
          </button>
          <button
            onclick="goToContent('yes')"
            style="margin: 60vh 0vw 0vh 15vw"
          >
            CONTINUE TO CONTENT
          </button>
        </div>
      </div>
      <div id="recording" class="hidden">
        <div id="recording-message" class="message">
          <span
            >Making sound for 5+ consecutive seconds will satisfy us. Wanna try
            it?</span
          >
        </div>
        <div id="recording-feedback" class="feedback">
          <button id="start-recording" onclick="startRecording()">
            YES I DO
          </button>
          <a id="download-recording"
            ><button class="hidden" style="margin: 0vh 0vw 0vh 5vw">
              DOWNLOAD RECORDING
            </button></a
          >
          <button
            id="continue-to-content"
            class="hidden"
            style="margin: 0vh 0vw 0vh -20vw"
            onclick="goToContent('no')"
          >
            CONTINUE
          </button>
        </div>
      </div>
      <div id="island" class="hidden">
        <div class="island">
          <img
            id="island-img"
            alt=""
            src="img/VIZ_1920-1080.png"
            width="1920"
            height="1080"
          />
        </div>
        <div class="island-rev hidden">
          <svg
            viewBox="0 0 1920 1080"
            preserveAspectRatio="xMidYMid slice"
            height="100%"
            width="100%"
          >
            <g
              transform="translate(0,1080) scale(0.1,-0.1)"
              fill="#000000"
              stroke="none"
            >
              <path
                d="M0 5400 l0 -5400 9600 0 9600 0 0 5400 0 5400 -9600 0 -9600 0 0
          -5400z m12819 3671 c66 -22 158 -69 320 -163 124 -72 318 -180 431 -241 112
          -60 265 -147 340 -194 230 -146 317 -195 570 -320 469 -233 678 -381 1036
          -738 141 -141 222 -228 618 -670 160 -179 210 -231 362 -376 146 -140 305
          -265 559 -438 170 -116 231 -170 286 -255 49 -75 77 -149 90 -242 23 -168 -67
          -362 -247 -534 -159 -150 -310 -262 -519 -380 -60 -34 -150 -86 -200 -115 -49
          -29 -232 -130 -405 -225 -732 -402 -1108 -636 -1557 -970 -201 -150 -310 -213
          -438 -253 -126 -39 -219 -51 -368 -44 -157 7 -253 28 -557 122 -270 83 -368
          105 -500 112 -131 7 -258 -9 -373 -48 -107 -35 -161 -66 -230 -129 -104 -95
          -146 -200 -147 -360 -1 -207 -32 -327 -108 -411 -60 -67 -100 -88 -292 -153
          -431 -145 -927 -208 -1465 -186 -354 15 -635 40 -945 86 -58 8 -116 17 -130
          19 -82 11 -716 112 -885 140 -353 58 -626 97 -820 116 -55 5 -107 12 -115 14
          -14 4 -433 29 -475 28 -11 -1 -69 3 -130 8 -60 4 -556 11 -1102 14 -545 3
          -998 7 -1005 9 -7 3 -110 10 -228 16 -343 18 -738 65 -1015 121 -202 42 -461
          135 -596 216 -227 135 -389 373 -389 572 0 72 32 183 86 301 57 126 70 187 54
          257 -17 76 -64 130 -246 280 -266 219 -399 375 -443 519 -48 154 -5 318 113
          433 l45 44 163 18 c90 10 267 27 393 38 127 12 289 28 360 36 72 8 189 19 260
          25 72 6 166 14 210 20 44 5 132 14 195 20 144 13 224 35 370 100 222 99 452
          222 845 455 887 525 1201 640 2150 791 350 55 711 139 928 214 176 60 453 203
          683 352 168 109 458 277 577 333 139 66 329 130 450 151 68 12 131 15 242 11
          129 -4 169 -9 286 -39 74 -20 199 -61 277 -92 733 -291 880 -330 1382 -367
          333 -24 820 21 1050 97 145 48 279 143 296 209 9 38 -19 72 -133 164 -264 211
          -466 458 -552 673 -85 210 -96 435 -31 576 31 67 128 177 188 214 109 67 265
          74 431 19z"
              />
            </g>
          </svg>
        </div>
        <div class="island">
          <svg
            id="island-nodes"
            viewBox="0 0 1920 1080"
            preserveAspectRatio="xMidYMid meet"
          >
            <circle
              id="N1"
              cx="453"
              cy="582"
              onclick="tryOne(this.id)"
              class="hidden"
            />
            <circle
              id="N2"
              cx="623"
              cy="732"
              onclick="tryOne(this.id)"
              class="hidden"
            />
            <circle
              id="N3"
              cx="834"
              cy="612"
              onclick="tryOne(this.id)"
              class="hidden"
            />
            <circle
              id="N4"
              cx="1234"
              cy="512"
              onclick="tryOne(this.id)"
              class="hidden"
            />
            <circle
              id="N5"
              cx="1124"
              cy="242"
              onclick="tryTwo(this.id)"
              class="hidden"
            />
          </svg>
        </div>
        <div class="N1 node hidden">
          <div class="close"></div>
          <div class="text">
            <div>
              Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas
              tincidunt nunc vitae velit semper efficitur.
            </div>
          </div>
        </div>
        <div class="N2 node hidden">
          <div class="close"></div>
          <div class="text rtl">
            <div>
              Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas
              tincidunt nunc vitae velit semper efficitur. Nulla facilisis neque
              venenatis mollis faucibus. Pellentesque habitant morbi tristique
              senectus et netus et malesuada fames ac turpis egestas. Morbi non
              tellus non massa semper dapibus in eu neque. Quisque ullamcorper
              dictum nibh, auctor viverra ex varius eget. Nulla facilisi.
              Praesent vel sapien risus. Duis vitae fermentum enim. Quisque sed
              est euismod, scelerisque nunc non, egestas turpis. Integer quis
              nibh faucibus, posuere arcu et, congue justo. Sed nec porttitor
              tortor. Nulla fermentum erat sed leo ullamcorper, et pellentesque
              urna laoreet. Proin congue ut tortor non posuere. Quisque interdum
              sem lacus, eget imperdiet risus bibendum vitae. Duis luctus nulla
              sed turpis ultrices accumsan. Fusce volutpat gravida leo nec
              elementum. Mauris laoreet velit in sapien gravida, a tempus urna
              pharetra. Curabitur fringilla placerat eros, ut sodales turpis. In
              eget sapien felis. Aliquam in tincidunt nisi. Quisque vestibulum,
              quam id mollis fringilla, enim libero euismod nisi, quis ornare
              lorem lorem eget odio. Etiam eget commodo odio. In placerat ligula
              nibh, a laoreet velit gravida a. Nunc aliquet justo euismod
              malesuada convallis. Donec feugiat scelerisque neque, quis semper
              quam hendrerit sit amet. Aenean id convallis nisi.
            </div>
          </div>
        </div>
        <div class="N3 node hidden">
          <div class="close"></div>
          <div class="video">
            <iframe
              id="N3_video"
              src="https://ocean-archive.org/embed/1957"
              frameborder="0"
              scrolling="no"
            ></iframe>
          </div>
        </div>
        <div class="N4 node hidden">
          <div class="close"></div>
          <div class="audio">
            <div
              class="file row"
              style="
                display: flex;
                flex-wrap: wrap;
                margin-right: -15px;
                margin-left: -15px;
                flex: 1 0;
                overflow: hidden;
              "
            >
              <div style="width: 100% !important">
                <div style="cursor: pointer; position: relative; z-index: 0">
                  <div
                    style="
                      width: 100%;
                      padding-right: 15px;
                      padding-left: 15px;
                      margin-right: auto;
                      margin-left: auto;
                    "
                  >
                    <div
                      style="
                        display: flex;
                        flex-wrap: wrap;
                        margin-right: -15px;
                        margin-left: -15px;
                        position: absolute;
                        z-index: 4;
                        width: 100%;
                        height: 100%;
                        top: 50%;
                        transform: translateY(-50%);
                        color: #000;
                        align-items: center;
                      "
                    >
                      <div
                        style="
                          -webkit-filter: blur(6px);
                          filter: blur(6px);
                          z-index: -1;
                          position: absolute;
                          left: 0;
                          top: 0;
                          height: 100%;
                          width: 100%;
                          background: linear-gradient(
                            90deg,
                            #fff 40%,
                            hsla(0, 0%, 100%, 0)
                          );
                        "
                      ></div>
                      <div style="line-height: 0; padding: 0 15px">
                        <svg
                          style="vertical-align: middle; overflow: hidden"
                          stroke="#e37aac"
                          fill="#e37aac"
                          stroke-width="0"
                          viewBox="0 0 448 512"
                          height="1em"
                          width="1em"
                          xmlns="http://www.w3.org/2000/svg"
                        >
                          <path
                            d="M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"
                          ></path>
                        </svg>
                      </div>
                      <div class="info col-6 col-md-4">
                        <div class="title">
                          Sonic Warfare / Collateral Damage
                        </div>
                      </div>
                    </div>
                    <div
                      id="wavepreview_1287_slider"
                      style="
                        font-size: 1rem;
                        font-weight: 400;
                        line-height: 1.5;
                        color: #212529;
                        text-align: left;
                      "
                    >
                      <wave
                        style="
                          display: block;
                          position: relative;
                          user-select: none;
                          height: 80px;
                          overflow: hidden;
                        "
                        ><wave
                          style="
                            position: absolute;
                            z-index: 3;
                            left: 0px;
                            top: 0px;
                            bottom: 0px;
                            overflow: hidden;
                            width: 0px;
                            display: block;
                            box-sizing: border-box;
                            border-right: 0px solid rgb(74, 116, 165);
                            pointer-events: none;
                          "
                          ><canvas
                            width="1873"
                            height="80"
                            style="
                              position: absolute;
                              left: 0px;
                              top: 0px;
                              bottom: 0px;
                              height: 100%;
                              width: 1873px;
                            "
                          ></canvas></wave
                        ><canvas
                          width="1873"
                          height="80"
                          style="
                            position: absolute;
                            z-index: 2;
                            left: 0px;
                            top: 0px;
                            bottom: 0px;
                            height: 100%;
                            pointer-events: none;
                            width: 1873px;
                          "
                        ></canvas></wave
                      ><audio
                        preload="false"
                        src="https://audio.ocean-archive.org/private/eu-central-1:12102e0b-bb96-42f0-9d3c-1df78ee120b2/418b7876-0b02-4d53-b0c4-38683f95c14b/6e46a790-b47c-11ea-ab3f-b3e2d9e4ba0f-Sonic Warfare _ Collateral Damage.m4a"
                        style="width: 100%"
                      ></audio>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="N5 node hidden">
          <div class="close"></div>
          <div class="video-rev">
            <iframe
              id="N5_video"
              src="https://ocean-archive.org/embed/1957"
              frameborder="0"
              scrolling="no"
            ></iframe>
          </div>
        </div>
      </div>
      <div class="rnInner">
        <div class="rnUnit"></div>
        <div class="rnUnit"></div>
        <div class="rnUnit"></div>
        <div class="rnUnit"></div>
        <div class="rnUnit"></div>
        <div class="rnUnit"></div>
        <div class="rnUnit"></div>
        <div class="rnUnit"></div>
        <div class="rnUnit"></div>
        <div class="rnUnit"></div>
      </div>
    </main>
    <script src="micInputHandler.js"></script>
    <script type="text/javascript">
      const [nodes, image, islands] = [
        [
          { id: "N1", moveX: "-50%", moveY: "-50%", content: "text" },
          { id: "N2", moveX: "50%", moveY: "-50%", content: "text" },
          { id: "N3", moveX: "-50%", moveY: "-50%", content: "video" },
          { id: "N4", moveX: "0%", moveY: "0%", content: "audio" },
          //   { id: "N5", moveX: "0%", moveY: "0%", content: "video" },
        ],
        document.getElementById("island-img"),
        [].slice.call(
          document.querySelectorAll(".island,#island-img,#island-nodes")
        ),
      ];
      //   image.onload = function () {
      //     console.log("happened");
      //   };
      function passIntro() {
        document.querySelector("main").classList.toggle("cover");
        document.getElementById("intro-feedback").classList.toggle("start");
        document
          .querySelectorAll("#intro-feedback,#intro-message")
          .forEach(function (e) {
            e.classList.toggle("intro-feedback-move");
          });

        document.querySelector("main").classList.toggle("background-move-1");

        document.getElementById("participation").classList.toggle("hidden");
        document
          .getElementById("participation-feedback")
          .classList.toggle("start");
        document
          .querySelectorAll("#participation-feedback,#participation-message")
          .forEach(function (e) {
            e.classList.toggle("participation-feedback-move-in");
          });

        setTimeout(function () {
          document.getElementById("intro").classList.toggle("hidden");
          document.querySelector("main").classList.toggle("cover");
        }, 2000);
      }
      function passParticipation() {
        document.querySelector("main").classList.toggle("cover");
        document.querySelector("main").classList.toggle("background-move-2");
        document
          .querySelectorAll("#participation-feedback,#participation-message")
          .forEach(function (e) {
            e.classList.toggle("participation-feedback-move-in");
            e.classList.toggle("participation-feedback-move-out");
          });
        document.getElementById("recording").classList.toggle("hidden");
        document.getElementById("recording-feedback").classList.toggle("start");
        document
          .querySelectorAll("#recording-feedback,#recording-message")
          .forEach(function (e) {
            e.classList.toggle("recording-feedback-move-in");
          });
        setTimeout(function () {
          document.getElementById("participation").classList.toggle("hidden");
          document.querySelector("main").classList.toggle("cover");
          document
            .querySelectorAll("#participation-feedback,#participation-message")
            .forEach(function (e) {
              e.classList.toggle("hidden");
            });
        }, 2000);
      }
      function startRecording() {
        document.querySelector("main").classList.toggle("cover");
        document.querySelector("main").classList.toggle("background-move-3");
        document.getElementById("start-recording").classList.toggle("fast-end");
        setTimeout(function () {
          document
            .querySelector("#recording-message span")
            .classList.toggle("fast-end");
        }, 1000);
        setTimeout(function () {
          document.querySelector("main").classList.toggle("cover");
          document
            .getElementById("recording-feedback")
            .classList.toggle("start");
          handleMicrophoneInput();
        }, 2000);
      }
      function goToContent(skipped) {
        showContent();
        document.querySelector("main").classList.toggle("cover");
        document.querySelector("body").classList.toggle("out");
        if (skipped === "yes") {
          document.querySelector("main").classList.toggle("background-move-4");
          document
            .querySelectorAll("#participation-feedback,#participation-message")
            .forEach(function (e) {
              e.classList.toggle("participation-feedback-move-in");
              e.classList.toggle("participation-feedback-move-out");
            });
          setTimeout(function () {
            document
              .querySelectorAll(
                "#participation,#participation-feedback,#participation-message"
              )
              .forEach(function (e) {
                e.classList.toggle("hidden");
              });
          }, 2000);
        } else if (skipped === "no") {
          document
            .querySelectorAll("#recording-message,#recording-feedback")
            .forEach(function (e) {
              e.classList.toggle("recording-feedback-move-in");
              e.classList.toggle("recording-feedback-move-out");
            });
          setTimeout(function () {
            document.querySelectorAll("#recording").forEach(function (e) {
              e.classList.toggle("hidden");
            });
          }, 2000);
        }
      }
      function showContent() {
        setTimeout(function () {
          document.getElementById("island").classList.toggle("hidden");
          document.getElementById("island-img").classList.toggle("start");
          document.querySelector("main").classList.toggle("cover");
        }, 2000);
        setTimeout(function () {
          nodes.map((n) => {
            document.getElementById(n.id).classList.toggle("hidden");
            document.getElementById(n.id).classList.toggle("start");
          });
          document.getElementById("island-nodes").classList.toggle("start");
        }, 4000);
      }
      function moveIt(id, where, moveX, moveY, content) {
        if (where === "out") {
          document.querySelector("." + id).classList.remove("hidden");
        } else {
          document.querySelector("." + id).classList.remove("hidden");
          document.querySelector("." + id).classList.add("hidden");
        }
        islands.map((i) => {
          i.style.transition = "all 0.5s ease";
          i.style.left = moveX;
          i.style.top = moveY;
        });
        if ((content === "video") & (where === "back")) {
          //const frame = document.getElementById(id + "_video");
          //frame.contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}', '*');
        }
      }
      function tryOne(id) {
        const node = nodes.find((n) => n.id === id);
        const el = document.getElementById(id);
        document
          .querySelector("div." + el.id + " div.close")
          .addEventListener("click", function () {
            moveIt(el.id, "back", "0%", "0%", node.content);
          });
        moveIt(el.id, "out", node.moveX, node.moveY, node.content);
      }
      function tryTwo(id) {
        document.querySelector(".island").classList.add("hidden");
        document.querySelector(".island-rev").classList.remove("hidden");
        const node = nodes.find((n) => n.id === id);
        const el = document.getElementById(id);
        document
          .querySelector("div." + el.id + " div.close")
          .addEventListener("click", function () {
            moveIt(el.id, "back", "0%", "0%", node.content);
          });
        moveIt(el.id, "out", node.moveX, node.moveY, node.content);
      }
    </script>
  </body>
</html>
